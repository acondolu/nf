\documentclass[sigplan,10pt,anonymous,review]{acmart}\settopmatter{printfolios=true,printccs=false,printacmref=false}

\input{macros.tex}

%%
%% \BibTeX command to typeset BibTeX logo in the docs
\AtBeginDocument{%
  \providecommand\BibTeX{{%
    \normalfont B\kern-0.5em{\scshape i\kern-0.25em b}\kern-0.8em\TeX}}}

%% Rights management information.  This information is sent to you
%% when you complete the rights form.  These commands have SAMPLE
%% values in them; it is your responsibility as an author to replace
%% the commands and values with those provided to you when you
%% complete the rights form.
\setcopyright{acmcopyright}
\copyrightyear{2018}
\acmYear{2018}
\acmDOI{10.1145/1122445.1122456}

%% These commands are for a PROCEEDINGS abstract or paper.
\acmConference[Woodstock '18]{Woodstock '18: ACM Symposium on Neural
  Gaze Detection}{June 03--05, 2018}{Woodstock, NY}
\acmBooktitle{Woodstock '18: ACM Symposium on Neural Gaze Detection,
  June 03--05, 2018, Woodstock, NY}
\acmPrice{15.00}
\acmISBN{978-1-4503-XXXX-X/18/06}


%%
%% Submission ID.
%% Use this when submitting an article to a sponsored event. You'll
%% receive a unique submission ID from the organizers
%% of the event, and this ID should be used as the parameter to this command.
%%\acmSubmissionID{123-A56-BU3}

%%
%% The majority of ACM publications use numbered citations and
%% references.  The command \citestyle{authoryear} switches to the
%% "author year" style.
%%
%% If you are preparing content for an event
%% sponsored by ACM SIGGRAPH, you must use the "author year" style of
%% citations and references.
%% Uncommenting
%% the next command will enable that style.
%%\citestyle{acmauthoryear}

%%
%% end of the preamble, start of the body of the document source.
\begin{document}

%%
%% The "title" command has an optional parameter,
%% allowing the author to define a "short title" to be used in page headers.
\title{Universal Sets in Coq}

%%
%% The "author" command and its associated commands are used to define
%% the authors and their affiliations.
%% Of note is the shared affiliation of the first two authors, and the
%% "authornote" and "authornotemark" commands
%% used to denote shared contribution to the research.
\author{Andrea Condoluci}
\email{andreacondoluci@gmail.com}
\orcid{1234-5678-9012}
\affiliation{%
  \institution{Institute for Clarity in Documentation}
  \streetaddress{P.O. Box 1212}
  \city{Dublin}
  \state{Ohio}
  \postcode{43017-6221}
}

%%
%% By default, the full list of authors will be used in the page
%% headers. Often, this list is too long, and will overlap
%% other information printed in the page headers. This command allows
%% the author to define a more concise list
%% of authors' names for this purpose.
% \renewcommand{\shortauthors}{Trovato and Tobin, et al.}

%%
%% The abstract is a short summary of the work to be presented in the
%% article.
\begin{abstract}
  New Foundations (\NF) is \dots
\end{abstract}

% %%
% %% The code below is generated by the tool at http://dl.acm.org/ccs.cfm.
% %% Please copy and paste the code instead of the example below.
% %%
% \begin{CCSXML}
% <ccs2012>
%  <concept>
%   <concept_id>10010520.10010553.10010562</concept_id>
%   <concept_desc>Computer systems organization~Embedded systems</concept_desc>
%   <concept_significance>500</concept_significance>
%  </concept>
%  <concept>
%   <concept_id>10010520.10010575.10010755</concept_id>
%   <concept_desc>Computer systems organization~Redundancy</concept_desc>
%   <concept_significance>300</concept_significance>
%  </concept>
%  <concept>
%   <concept_id>10010520.10010553.10010554</concept_id>
%   <concept_desc>Computer systems organization~Robotics</concept_desc>
%   <concept_significance>100</concept_significance>
%  </concept>
%  <concept>
%   <concept_id>10003033.10003083.10003095</concept_id>
%   <concept_desc>Networks~Network reliability</concept_desc>
%   <concept_significance>100</concept_significance>
%  </concept>
% </ccs2012>
% \end{CCSXML}

% \ccsdesc[500]{Computer systems organization~Embedded systems}
% \ccsdesc[300]{Computer systems organization~Redundancy}
% \ccsdesc{Computer systems organization~Robotics}
% \ccsdesc[100]{Networks~Network reliability}

%%
%% Keywords. The author(s) should pick words that accurately describe
%% the work being presented. Separate the keywords with commas.
\keywords{set theory, new foundations, universal set}

%%
%% This command processes the author and affiliation and title
%% information and builds the first part of the formatted document.
\maketitle

\section{Introduction}

\TODO{history}

\paragraph{Set theories.}
A \emph{set theory} is a first-order theory having the usual logical connectives ($\neg$, $\land$, $\lor$, $\to$, $\leftrightarrow$, $\exists$, $\forall$) plus two relation symbols: \emph{equality} ($=$) and \emph{membership} ($\in$). Variables (like $x,y,z,\ldots$) range over sets, and a set is meant to be a collection of sets itself: $x \in y$ means that $x$ is a \emph{member} or an \emph{element} of $y$.

%Formulas of set theory are thus described by the following grammar: 

% \[\begin{array}{rrl}
%   \varphi & \grameq & \bot \mid \neg \varphi \mid \varphi \land \varphi \mid \varphi \lor \varphi \\
%   & & \mid \forall x.\, \varphi \mid \exists x.\, \varphi \\
%   & & \mid x = y \mid x \in y .
% % \TODO{Oh no, we need $\leftrightarrow$!!!}
% \end{array}\]

Sets do not posses any internal structure other than their \emph{extension}, \ie{} the elements they contain. The \emph{axiom of extensionality} formalizes this fact by requiring that sets having the same extension are equal:

\[\forall x y.\, x = y \leftrightarrow \forall z. \, z \in x \leftrightarrow z \in y \quad \tag{\SetExt} \]

A natural way to express a collection of sets is by taking all sets that satisfy a given predicate; this collection is expressed in symbols by $\Compr x \varphi$, reading ``the collection of all $x$'s such that $\varphi$ holds''. \TODO{for instance, ordinals, \dots} A very desirable ??? would be that collections specified in this way are sets themselves, as the \emph{axiom of comprehension} requires:

\[ \exists y.\, \forall x.\, x \in y \leftrightarrow \varphi  \quad \tag{\SetCompr} \]

\TODO{another point about extension is the identification between sets (citizens) and unary predicates over sets:}

Where $y$ does not occur in $\varphi$. \TODO{denote with $\Compr x \varphi$ the set which witnesses the existential $\exists y\ldots$, which is then unique by extensionality \dots }
Set comprehension is actually an axiom schema: one adds an axiom for every $\varphi$. \TODO{but which $\varphi$s are allowed? NOT ALL!}
When all $\varphi$s, unrestricted comprehension. \TODO{But Russel's paradox $\varphi \defeq x \not\in x$.\footnotemark{}}

\footnotetext{By $x\not\in x$ we mean $\neg {(x \in x)}$. }

Problem is circularity.

There are different ways to restrict \SetCompr{} so to avoid Russel's paradox. \ZF's way is to only allow comprehension of \emph{guarded} proposition, of the form $x \in y \land \varphi$ for some $y\neq x$ and an arbitrary $\varphi$. \TODO{$\Compr {x \in y} \varphi$} No self-reference because carve only subsets of already existing sets, and other axioms of ZF force sets to be well-founded (\dots).

NF's way is \dots to restrict the axiom of comprehension to only \emph{stratified} formulas \ldots
The axiom of stratified comprehension does not force the collection $\Compr x {x \not\in x}$ to be a set, because the formula $x \not\in x$ is not stratified. As a consequence, Russel's paradox is avoided.

\subsection{Quantifier-free Comprehension}

In this paper we consider a weaker fragment of full-fledged \NF{}, obtained by restricting the axiom of stratified comprehension to only quantifier-free formulas.

\TODO{dire che: in this sub-case, we can actually replace stratified comprehension with an equivalent axiomatization with a few set operators ($\Universe, \Complement \Placeholder, \Union \Placeholder \Placeholder, \Sing\Placeholder, \Essence\Placeholder$) and charachterizing axioms.}

By a rapid inspection, we note that when $\varphi$ is quantifier-free, $\varphi$ is stratified if and only if it does not contain ``$x \in x$'' as a subformula.
\TODO{This means that we can drop the definition of stratified, and use a much simplier syntactic restriction on $\varphi$'s}

To understand what operations on sets are necessary to , we 
We show that $\Compr x \varphi$ for $\varphi$ stratified and quantifier-free can . We blah by cases on the structure of $\varphi$:

\[\begin{array}{lcll}
  \Compr x {x = x} & = & \Universe \\
  \Compr x {x = y} & = & \Sing y \\
  \Compr x {y = x} & = & \Sing y \\
  \Compr x {y = z} & = &
    \begin{cases}
      \Universe & \text{if } y = z\\
      \Complement \Universe & \text{otherwise}
    \end{cases}\\
  \Compr x {x \in y} & = & y \\
  \Compr x {y \in x} & = & \Essence y \\
  \Compr x {y \in z} & = &
    \begin{cases}
      \Universe & \text{if } y \in z\\
      \Complement \Universe & \text{otherwise}
    \end{cases}\\
  \Compr x {\neg\varphi} & = & \Complement {\Compr x \varphi} \\
  \Compr x {\varphi \lor \varphi'} & = & \Union {\Compr x \varphi} {\Compr x {\varphi'}} \\
\end{array}\]

where $x\neq y$ and $x \neq z$ above.

where
\begin{enumerate} \renewcommand\labelitemi{--}
  \item $\Universe$ is the universal set, \ie{} the set containing all sets:
    \[ \forall z.\, z \in \Universe \sctag{Universe} \]
  \item $\Complement \Placeholder$ is the set complement:
    \[ \forall z.\, z \in \Complement x \leftrightarrow \neg (z \in x) \sctag{Complement}\]
  \item $\Union \Placeholder \Placeholder$ is the set union:
    \[ \forall z.\, z \in \Union x y \leftrightarrow z \in x \lor z \in y \sctag{Union} \]
  \item $\Sing\Placeholder$ is singleton:
    \[ \forall z.\, z \in \Sing x \leftrightarrow x = z \sctag{Singleton} \]
  \item $\Essence\Placeholder$ is the essence:
    \[ \forall z.\, z \in \Essence{x} \leftrightarrow x \in z \sctag{Essence} \]
\end{enumerate}

\subsection{Sets in Coq}
\TODO{Descrivere Coq e la formalizzazione di ZF in Coq.}

\TODO{shallow embedding}

\section{Roadmap}
Dire:
\begin{itemize}
  \item Come si fara' in ogni sezione: prima definire il dominio, poi l'uguaglianza, poi membership, poi morphism, poi extensionality e set operators independently.
  \item Contenuto delle sezioni sotto
\end{itemize}

\section{\NFTWO}
\section{\NFO}

Test:

\begin{coqdoccode}
  \coqdocnoindent
  \Definition{} \coqdocdefinition{extP} \{\coqdocvar{X}\} \coqdocvar{P} \coqdocvar{Q} := \Math\forall \Var{x}: \Var{X}, \Var{P} \Var{x} \Math\leftrightarrow{} \Var{Q} \Var{x}.\coqdoceol
  \coqdocemptyline
\end{coqdoccode}
% \coqdocindent{1.00em}


\section{Discussion}
\subsection{Related Work}
\subsection{Future Work}



%%
%% The acknowledgments section is defined using the "acks" environment
%% (and NOT an unnumbered section). This ensures the proper
%% identification of the section in the article metadata, and the
%% consistent spelling of the heading.
% \begin{acks}
% To Robert, for the bagels and explaining CMYK and color spaces.
% \end{acks}

%%
%% The next two lines define the bibliography style to be used, and
%% the bibliography file.
\bibliographystyle{ACM-Reference-Format}
\bibliography{main}

%%
%% If your work has an appendix, this is the place to put it.
\appendix


\end{document}
\endinput
