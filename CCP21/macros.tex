% !TEX root = main.tex

\usepackage[color]{coqdoc}
\usepackage{amsmath,amssymb}
\usepackage{bbold}
\usepackage{hyperref}
\usepackage{marginnote}
\usepackage{xcolor}
\usepackage{stmaryrd}
\usepackage{graphicx}
\usepackage{cleveref}
\usepackage[normalem]{ulem}
% \normalem
% \usepackage{fancyvrb}

% \renewcommand*{\proofname}{Proof sketch}
\makeatletter
\renewenvironment{proof}[1][\coqdockw{Proof} \coqdockw{idea}]{\par
  % \vspace{-.1\topsep}% remove the space after the theorem
  \pushQED{\qed}%
  \normalfont
  \topsep0pt \partopsep0pt % no space before
  \trivlist
  \item[\hskip\labelsep
        \itshape
    #1\@addpunct{.}]\ignorespaces
}{%
  \popQED\endtrivlist\@endpefalse
  \addvspace{6pt plus 6pt} % some space after
}
\makeatother

\newcommand\margincoq[1]{\marginpar{\rotatebox{270}{\footnotesize $\star$ [\coqid{#1}]}}}
\newcommand{\coqdefRef}[3]{\margincoq{#1}\coqdef{#1}{#2}{#3}}
\newcommand{\coqid}[1]{\texttt{#1}}

\newcommand\AEQ{\ensuremath{\equiv_A}}
\newcommand\BEQ{\ensuremath{\equiv_B}}
\newcommand\AIN{\ensuremath{\in_A}}
\newcommand\BIN{\ensuremath{\in_B}}
\newcommand\IN{\ensuremath{\in}}
\newcommand\EQ{\ensuremath{\equiv}}

\newcommand\INX{ERROR}
\newcommand\EQX{ERROR}
\newcommand\XORS{\coqref{NFO.Sets.QXor}{\coqdocdefinition{XOR}}~}

\newcommand\var\coqdocvar

\newcommand\AXOR{\coqref{NFO.Sets.AXor}{\ensuremath{\triangle_A}}}
\newcommand\SXOR{\coqref{NFO.Sets.QXor}{\ensuremath{\triangle}}}
\newcommand\XORP{\coqref{NFO.Sets.AXor}{\ensuremath{\veebar_P}}~}

\newcommand\sig[1]{\coqdocvar{\ensuremath{\sigma_{#1}}}}

% AUX
\newcommand\TODO[1]{\textcolor{red}{{\bf TODO} #1}}

\newcommand\Placeholder{\textcolor{gray}{\ensuremath{\bullet}}}
\newcommand\myand{\mathrel{\&}}

\newcommand\A{\ensuremath{\mathcal{A}}}
\newcommand\B{\ensuremath{\mathcal{B}}}

\DeclareUnicodeCharacter{1D4E5}{\ensuremath{\mathcal{V}}}
\DeclareUnicodeCharacter{2261}{\ensuremath{\equiv}}
\DeclareUnicodeCharacter{27E6}{\ensuremath{\llbracket}}
\DeclareUnicodeCharacter{27E7}{\ensuremath{\rrbracket}}
\DeclareUnicodeCharacter{2218}{\ensuremath{\circ}}
\DeclareUnicodeCharacter{2A01}{\ensuremath{\oplus}}
\DeclareUnicodeCharacter{2A00}{\ensuremath{\odot}}
\DeclareUnicodeCharacter{2208}{\ensuremath{\in}}
\DeclareUnicodeCharacter{22BB}{\ensuremath{\veebar}}
\DeclareUnicodeCharacter{222A}{\ensuremath{\cup}}

\newcommand\XOR{\coqref{NFO.Xor.xor}{‚äª}~}

\newcommand{\stkout}[1]{\text{\sout{\ensuremath{#1}}}}

% LOGIC
\newcommand\grameq{::=}
\newcommand\defeq{:=}
\newcommand\ie{\textit{i.e.}}
\newcommand\fv[1]{\mathrm{fv}(#1)}

% NF
\newcommand\ZF{{\sf ZF}}
\newcommand\ZFC{{\sf ZFC}}
\newcommand\NF{{\sf NF}}
\newcommand\NFTWO{{\tt NF2}}
\newcommand\NFX{{\tt NF*}}
\newcommand\NFO{{\tt NFO}}
\newcommand\Coq{{\tt Coq}}
\newcommand\SetCompr{{\textsc{SetCompr}}}
\newcommand\SetExt{{\textsc{SetExt}}}

\newcommand\sctag[1]{\tag{\textsc{#1}}}

\newcommand\Essence[1]{\Verb{B}\,#1}
% \newcommand\Sing[1]{\Verb{\{}#1\Verb{\}}}
\newcommand\Sing[1]{\Verb{S}\,#1}
% \newcommand\Sing[1]{\Verb{\{} #1 \Verb{\}}}
\newcommand\Complement[1]{\overline{#1}}
% \newcommand\Complement[1]{\Verb{Compl}\,#1}
\newcommand\Char[1]{\Verb{Char}_{#1}} % \mathbb{1}
\newcommand\Compr[2]{\Verb{\{} #1 ~\Verb{|}~ #2 \Verb{\}}}
\newcommand\Universe{\Verb{U}}
\newcommand\Verb[1]{\text{\texttt{#1}}}
% \newcommand\Union[2]{#1 \mathrel{\Verb{U}} #2}
\newcommand\Union[2]{#1 \cup #2}

% COQ DOC
\newcommand\Definition{\coqdockw{Definition}}
\newcommand\Math[1]{\coqdocnotation{\ensuremath{#1}}}
\newcommand\Var\coqdocvariable
